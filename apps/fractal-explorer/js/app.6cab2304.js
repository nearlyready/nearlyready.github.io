(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],h=0,d=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,s=1;s<o.length;s++){var c=o[s];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=o[0]))}return t}var n={},a={app:0},i=[];function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("85ec"),a=o.n(n);a.a},"1cbf":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e),o.d(e,"bus",(function(){return J}));o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[t.isReady?o("Graphic"):t._e()],1)},i=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main-holder"},[o("div",{ref:"ch",staticClass:"canvas-panel"},[o("canvas",{attrs:{id:"graphic-canvas","data-paper-hidpi":"off"}})]),o("div",{staticClass:"control-panel"},[o("div",{staticClass:"mode-buttons-holder"},[o("div",{staticClass:"mode-button",class:{"mode-button-selected":"zoom"!==t.touchMode},on:{click:function(e){return t.setMode("swap")}}},[o("i",{staticClass:"material-icons not-selectable"},[t._v("swap_horiz")])]),o("div",{staticClass:"mode-button",class:{"mode-button-selected":"zoom"===t.touchMode&&"zoom-plus"===t.zoomSign},on:{click:function(e){return t.setMode("zoom-plus")}}},[o("i",{staticClass:"material-icons not-selectable"},[t._v("add")])]),o("div",{staticClass:"mode-button",class:{"mode-button-selected":"zoom"===t.touchMode&&"zoom-minus"===t.zoomSign},on:{click:function(e){return t.setMode("zoom-minus")}}},[o("i",{staticClass:"material-icons not-selectable"},[t._v("remove")])])]),t._m(0),o("div",{staticClass:"control-buttons-holder"},[o("div",{staticClass:"control-button",on:{click:function(e){return t.showPopup()}}},[o("i",{staticClass:"material-icons not-selectable"},[t._v("settings")])]),o("div",{staticClass:"control-button",on:{click:function(e){return t.reset()}}},[o("i",{staticClass:"material-icons not-selectable"},[t._v("refresh")])]),o("div",{staticClass:"control-button",on:{click:function(e){return t.showInfo()}}},[o("i",{staticClass:"material-icons not-selectable"},[t._v("help")])])])]),o("div",{staticClass:"overlay",class:{hidden:t.overlayIsHidden}},[o("div",{staticClass:"overlay-text"},[t._v("CALCULATING")])]),o("div",{staticClass:"popup-holder",class:{hidden:t.infoIsHidden}},[o("h1",[t._v("About")]),o("div",{staticClass:"popup-scroller"},[t._v(" Blah blah blah. v1.1 ")]),o("div",{staticClass:"popup-buttons-holder"},[o("span",{staticClass:"popup-button",on:{click:function(e){return t.hideInfo()}}},[t._v("OK")])])]),o("div",{staticClass:"popup-holder",class:{hidden:t.popupIsHidden}},[o("h1",[t._v("Settings")]),o("div",{staticClass:"popup-scroller"},[o("h3",[t._v("Zoom")]),o("div",{staticClass:"popup-group"},[o("Slider",{attrs:{uniqueRef:"colorWidthSlider",param:t.getZoomParam()}})],1),o("div",{staticClass:"popup-separator"}),o("h3",[t._v("Colors")]),o("div",{staticClass:"popup-group"},[o("Slider",{attrs:{uniqueRef:"colorWidthSlider",param:t.getColorWidthParam()}}),o("Slider",{attrs:{uniqueRef:"colorRepeatsSlider",param:t.getColorRepeatsParam()}})],1),o("div",{staticClass:"popup-group"},[o("Color",{attrs:{colors:t.colors}})],1)]),o("div",{staticClass:"popup-buttons-holder"},[o("span",{staticClass:"popup-button",on:{click:function(e){return t.update()}}},[t._v("OK")])])])])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"title-holder"},[o("div",{staticClass:"hTitle"},[t._v("FRACTAL")]),o("div",{staticClass:"hSubtitle"},[t._v("explorer")])])}],c=(o("99af"),o("4160"),o("b0c0"),o("159b"),o("d4ec")),l=o("bee2");function u(t,e){return{x:t.x+e.x,y:t.y+e.y}}function h(t){return t.x*t.x+t.y*t.y}function d(t){return Math.pow(h(t),.5)}function p(t){var e=d(t);return{r:e,theta:0===e?0:Math.atan2(t.y,t.x)}}function f(t){return{x:t.r*Math.cos(t.theta),y:t.r*Math.sin(t.theta)}}function m(t,e){return{r:Math.pow(t.r,e),theta:e*t.theta}}function g(t,e){var o=p(t),n=m(o,e);return f(n)}var v=function(){function t(e,o){Object(c["a"])(this,t),this.threshold=e,this.iterate=o}return Object(l["a"])(t,[{key:"calculateEscape",value:function(t,e,o){var n=0,a=t;while(n<o-1){if(d(a)>this.threshold)break;a=this.iterate(a,e),n++}return n}}]),t}();var b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"cph",attrs:{id:"color-picker"}})},C=[],y=o("a900"),x={name:"Color",date:function(){return{colorPicker:null}},props:["colors"],methods:{select:function(){var t=[];this.colorPicker.colors.forEach((function(e){t.push(e.rgb)})),console.log(t),J.$emit("update-colors",t)}},mounted:function(){var t=this.$refs.cph;this.colorPicker=new y["a"].ColorPicker("#color-picker",{colors:this.colors,width:t.offsetWidth});var e=this;this.colorPicker.on("color:change",(function(t){console.log(t);var o=[];e.colorPicker.colors.forEach((function(t){o.push(t.rgb)})),console.log(o),J.$emit("update-colors",o)}))}},M=x,R=o("2877"),w=Object(R["a"])(M,b,C,!1,null,"5f643da7",null),S=w.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"slider-outer"},[o("div",{staticClass:"slider-text"},[t._v(t._s(t.param.name)+":"+t._s(t.tidyValue(t.current)))]),o("div",{staticClass:"slider-holder"},[o("svg",{ref:t.uniqueRef,staticClass:"slider-svg",attrs:{width:"100%",height:"100%"}})])])},_=[],z=o("7407"),P=o.n(z),W=o("fb3a"),I=o.n(W),H={name:"Slider",props:["uniqueRef","param"],data:function(){return{current:this.param.default,delta:.1*(this.param.max-this.param.min),rangeMin:null,rangeMax:null}},methods:{tidyValue:function(t){return Math.floor(t)},valueToRange:function(t){return this.rangeMin+this.scaleFactor*(t-this.param.min)},rangeToValue:function(t){return this.param.min+(t-this.rangeMin)/this.scaleFactor},emitUpdate:function(){var t={name:this.param.key,value:this.param.isDiscrete?Math.floor(this.current):this.current};J.$emit("update-param",t)}},mounted:function(){console.log(I.a);var t=this.$refs[this.uniqueRef],e=t.clientWidth,o=t.clientHeight,n=P()(t),a=.5*o,i=.8*o,r=.01*e,s=.99*e,c=s-r,l=c/5,u=i,h=a-u/2,d=.2*u,p=r,f=s-l;this.rangeMin=p,this.rangeMax=f,this.scaleFactor=(this.rangeMax-this.rangeMin)/(this.param.max-this.param.min);var m=this.valueToRange(this.current),g=n.line(r,a,s,a);g.attr({stroke:"black",strokeWidth:i/2,opacity:.2});var v=n.rect(m,h,l,u,d,d);v.attr({stroke:"grey",strokeWidth:1}),v.addClass("handle");var b=null,C=this;I()(v.node).draggable({listeners:{start:function(t){b=+v.attr("x")},move:function(t){var e=b+ +t.dx;e<p&&(e=p),e>f&&(e=f),v.attr("x",e),C.current=C.rangeToValue(e),b=e},end:function(t){console.log(t.type),C.emitUpdate()}}})}},O=H,j=(o("b511"),Object(R["a"])(O,k,_,!1,null,null,null)),$=j.exports,T=(o("d3b7"),o("25f0"),o("2909")),E=function(){function t(e,o){Object(c["a"])(this,t),this.colors=e,this.params=o,this.colorMap=this.createColorMap()}return Object(l["a"])(t,[{key:"setColors",value:function(t){this.colors=t,this.colorMap=this.createColorMap()}},{key:"setParams",value:function(t){this.params=t,this.colorMap=this.createColorMap()}},{key:"RGBToHex",value:function(t,e,o){return t=t.toString(16),e=e.toString(16),o=o.toString(16),1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==o.length&&(o="0"+o),"#"+t+e+o}},{key:"getRGBMix",value:function(t,e,o){var n=[],a=["r","g","b"];return a.forEach((function(a){n.push(Math.floor(t[a]+(1-o)*(e[a]-t[a])))})),n}},{key:"createColorMap",value:function(){var t={},e=0,o=0,n=1;this.maxIterations=this.params.nColorRepeatsMax*this.params.colorWidthMax*(this.colors.length-1);for(var a=0;a<this.maxIterations;a++){e===this.params.colorWidth&&(o=n,n++,n===this.colors.length-1&&(n=0),e=0);var i=(this.params.colorWidth-e)/this.params.colorWidth;t[a]=this.RGBToHex.apply(this,Object(T["a"])(this.getRGBMix(this.colors[o],this.colors[n],i))),e++}for(var r=0;r<this.params.colorWidth;r++){var s=(this.params.colorWidth-r)/this.params.colorWidth;t[r+this.maxIterations]=this.RGBToHex.apply(this,Object(T["a"])(this.getRGBMix(this.colors[this.colors.length-2],this.colors[this.colors.length-1],s)))}return t}},{key:"getColor",value:function(t,e){var o=t-(e-this.params.colorWidth);return o>0?this.colorMap[this.maxIterations+o]:this.colorMap[t]}}]),t}(),B={name:"Graphic",props:{},components:{Color:S,Slider:$},data:function(){return{colors:[{r:100,g:0,b:0},{r:255,g:150,b:150},{r:255,g:255,b:255},{r:0,g:0,b:0}],isReady:!1,popupIsHidden:!0,infoIsHidden:!0,overlayIsHidden:!0,touchMode:"zoom",zoomSign:"zoom-plus"}},methods:{reset:function(){J.$emit("reset")},setMode:function(t){console.log(t),"swap"===t?this.touchMode="swap":(this.touchMode="zoom",this.zoomSign=t,console.log(this.zoomSign))},showPopup:function(){this.popupIsHidden=!1,this.overlayIsHidden=!1,this.updateState={zoomChanged:!1,colorsChanged:!1,paramsChanged:!1}},showInfo:function(){this.infoIsHidden=!1,this.overlayIsHidden=!1},hideInfo:function(){this.infoIsHidden=!0,this.overlayIsHidden=!0},update:function(){this.updateState.colorsChanged||this.updateState.paramsChanged?J.$emit("update"):(this.popupIsHidden=!0,this.overlayIsHidden=!0)},getZoomParam:function(){return{isDiscrete:!0,name:"Zoom Multiplier",key:"zoomMultiplier",min:1,max:50,default:10}},getColorWidthParam:function(){return{isDiscrete:!0,name:"Color Width",key:"colorWidth",min:5,max:100,default:50}},getColorRepeatsParam:function(){return{isDiscrete:!0,name:"Color Repeats",key:"nColorRepeats",min:1,max:10,default:1}}},mounted:function(){var t=this,e=this.$refs.ch;console.log([e.offsetHeight,e.offsetWidth]),console.log([this.touchMode,this.zoomSign]);var o=document.getElementById("graphic-canvas");o.width=Math.floor(e.offsetWidth),o.height=Math.floor(e.offsetHeight);var n,a,i,r,s,c,l,h,d=o.getContext("2d"),p=this,f=0,m=o.width,b=o.height,C=0,y=function(){return(m-f)/(a-n)},x=function(){return(C-b)/(r-i)},M=function(){return{xMin:n,xMax:a,xRangeMin:f,xRangeMax:m,xScaleFactor:s,yMin:i,yMax:r,yRangeMin:b,yRangeMax:C,yScaleFactor:c}},R=function(t,e,o,l){console.log("setBounds"),n=t,a=e,i=o,r=l,s=y(),c=x(),console.log(M())},w=function(){var t=o.height/o.width;R(-2.5,2.5,-2.5*t,2.5*t)},S=function(t){return(t-f)/s+n},k=function(t){return(t-b)/c+i},_=function(){l=p.colors},z=function(){10,h="main"};w(),_(),z();for(var P=function(){return"zoom-plus"===p.zoomSign?$.zoomMultiplier:1/$.zoomMultiplier},W=function(t,e,o){console.log({zoomFactor:o}),console.log(M());var n=(m-f)/o,a=(C-b)/o;console.log({insetRangeWidth:n,insetRangeHeight:a});var i=S(t-n/2),r=S(t+n/2),s=k(e-a/2),c=k(e+a/2);R(i,r,s,c)},I=function(t,e,o){console.log("reframeToDomainPoint");var s=(a-n)/o,c=(r-i)/o;console.log({xDomainWidth:s,yDomainWidth:c}),R(t-s/2,t+s/2,e-c/2,e+c/2)},H=2,O=function(t,e){return u(g(t,2),e)},j=new v(H,O),$={nColorRepeats:this.getColorRepeatsParam().default,colorWidth:this.getColorWidthParam().default,nColorRepeatsMax:this.getColorRepeatsParam().max,colorWidthMax:this.getColorWidthParam().max,zoomMultiplier:this.getZoomParam().default},T=function(){return $.nColorRepeats*$.colorWidth*(p.colors.length-1)},B=T(),G=new E(l,$),A=[],F=f;F<m;F++){for(var q=[],D=C;D<b;D++){d.fillStyle="black",d.fillRect(F,D,1,1);var N={xRange:F,yRange:D};q.push(N)}A.push(q)}var Z=function(t){p.popupIsHidden=!0,p.overlayIsHidden=!1,setTimeout((function(){A.forEach((function(e,o){e.forEach((function(n,a){t(n,o,a),o===A.length-1&&a===e.length-1&&(p.overlayIsHidden=!0)}))}))}),1)},V=function(t){var e=j.calculateEscape(t.iterationParams.z0,t.iterationParams.c,B);d.fillStyle=G.getColor(e,B),d.fillRect(t.xRange,t.yRange,1,1),t.escape=e};function L(t,e,o){var n=t.getBoundingClientRect();return{xRange:e-n.left*(t.width/n.width),yRange:o-n.top*(t.height/n.height)}}var U=function t(e){console.log([e,p.touchMode,p.zoomSign]),Z((function(t,o,n){var a,i,r={x:S(o),y:k(n)};e?(a=r,i=e):(a={x:0,y:0},i=r),t.iterationParams={z0:a,c:i},V(t)})),o.onmousedown=function(n){var a=L(o,n.clientX,n.clientY),i={x:S(a.xRange),y:k(a.yRange)};"zoom"===p.touchMode?W(a.xRange,a.yRange,P()):(console.log("Non-zoom interaction. Bounds will be reset to initial value."),w(),"main"===h?(console.log("Switching to Julia set view."),h="julia"):(console.log("Swapping back to main view, zoom to: ".concat(e.x,", ").concat(e.y)),h="main",I(e.x,e.y,100))),"main"===h?t():t(e||i)}},K=function(){Z((function(t,e,o){d.fillStyle=G.getColor(t.escape,B),d.fillRect(t.xRange,t.yRange,1,1)}))},X=function(){Z((function(t,e,o){V(t)}))},Y=function(){w(),_(),z(),U()};J.$on("reset",(function(){Y()})),U(),this.isReady=!0,J.$on("update-colors",(function(e){t.updateState.colorsChanged=!0,l=e,console.log(t.updateState)})),J.$on("update-param",(function(e){console.log(e.name),"zoomMultiplier"!==e.name&&(t.updateState.paramsChanged=!0),$[e.name]=e.value,console.log(t.updateState)})),J.$on("update",(function(){t.updateState.colorsChanged&&G.setColors(l),t.updateState.paramsChanged?(G.setParams($),B=T(),X()):t.updateState.colorsChanged&&K()}))}},G=B,A=(o("ad2d"),Object(R["a"])(G,r,s,!1,null,"1b0ba92e",null)),F=A.exports,q={name:"App",components:{Graphic:F},data:function(){return{isReady:!1}},mounted:function(){this.isReady=!0}},D=q,N=(o("034f"),Object(R["a"])(D,a,i,!1,null,null,null)),Z=N.exports,V=o("9483");Object(V["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),n["a"].config.productionTip=!1;var J=new n["a"];new n["a"]({render:function(t){return t(Z)}}).$mount("#app")},"58e2":function(t,e,o){},"85ec":function(t,e,o){},ad2d:function(t,e,o){"use strict";var n=o("58e2"),a=o.n(n);a.a},b511:function(t,e,o){"use strict";var n=o("1cbf"),a=o.n(n);a.a}});
//# sourceMappingURL=app.6cab2304.js.map