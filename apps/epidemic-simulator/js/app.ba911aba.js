(function(e){function t(t){for(var n,a,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},r={app:0},o=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var n=i("85ec"),r=i.n(n);r.a},1:function(e,t){},2:function(e,t){},2811:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t),i.d(t,"bus",(function(){return O}));i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",[e.isReady?i("Particles",{ref:"particles",attrs:{properties:e.getParticlesProps(),parameters:e.getParticlesParams()}}):e._e()],1),i("div",{staticClass:"popup-holder",class:{hidden:!e.menuIsShowing}},[i("div",{staticClass:"top-right icon-holder-popup not-selectable",on:{click:function(t){return e.clickHideMenu()}}},[i("i",{staticClass:"material-icons"},[e._v("close")])]),i("div",{staticClass:"mini-heading"},[e._v("EPIDEMIC SIMULATOR")]),i("h2",[e._v(e._s(e.menuItems[e.menuItemNo].title))]),i("div",{ref:"pholder",staticClass:"popup-content"},[i("div",{ref:"sh",staticClass:"sliders-holder"},[0===e.menuItemNo?[e.isReady?e._e():void 0,e.isReady?e._l(e.getSliderParams(),(function(t){return i("div",{key:t.key,staticClass:"slider-holder"},[i("Slider",{attrs:{parameters:t,properties:e.getSliderProps(t)}})],1)})):e._e()]:e._e()],2),1===e.menuItemNo?i("div",[i("p",[e._v("Blahblahblah.")])]):e._e(),i("div",[e.isReady?i("div",[i("Graph",{class:[2===e.menuItemNo?e.selectedClass:e.notSelectedClass]})],1):e._e()])])]),i("div",{staticClass:"reset-button icon-holder not-selectable"},[i("div",{on:{click:function(t){return e.clickReset()}}},[i("i",{staticClass:"material-icons"},[e._v("refresh")])])]),e.menuIsShowing?e._e():i("div",{staticClass:"top-right icon-holder not-selectable"},[i("div",{on:{click:function(t){return e.clickShowMenu(0)}}},[i("i",{staticClass:"material-icons"},[e._v("settings")])]),i("div",{on:{click:function(t){return e.clickShowMenu(1)}}},[i("i",{staticClass:"material-icons"},[e._v("info")])]),i("div",{on:{click:function(t){return e.clickShowMenu(2)}}},[i("i",{staticClass:"material-icons"},[e._v("timeline")])])])])},o=[],a=(i("4160"),i("159b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("canvas",{attrs:{id:e.properties.id,"data-paper-hidpi":"off"}})}),s=[],l={props:["properties","parameters"],methods:{triggerReset:function(){this.resetRequired=!0}},mounted:function(){this.resetRequired=!1;var e=-1,t=-2,i=-3,n=this.parameters,r=document.getElementById(this.properties.id);r.width=this.properties.width,r.height=this.properties.height,paper.setup(r);var o=new Path.Rectangle({point:[0,0],size:[r.width,r.height]});o.fillColor="#ddeeff";var a=project.activeLayer,s=function(){return n["transmission_distance"].value*r.width/100},l=function(){return n["transmission_probability"].value},c=0,u=r.width,d=u-c,p=0,f=r.height,h=f-p,v=l(),m=200,g=.1/m,y=100,w=1,C=[],b=Math.min(r.height,r.width)/100,k=s(),_=k,P=0,x=0,R=function(e,t,i){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return!(n>i||r>i)&&(2^n)+(2^r)<(2^i)},S=function(e,t,n){var r=[e,t],o=[],a=[];n&&(r.forEach((function(e){e.isInteracting=!0,e.timeToRecovery>=0?o.push(e):e.timeToRecovery===i&&a.push(e)})),1===o.length&&1===a.length&&(a[0].timeToRecovery=Math.random()<v?m:a[0].timeToRecovery,o[0].mayInfectImminently=!0)),r.forEach((function(e){M(e),e.innerCircle.style=Object.assign(I(e.timeToRecovery),e.innerCircle.style)}))},I=function(n){var r=.1*b,o={fillColor:"#e74c3c",strokeWidth:2*r,strokeColor:"#c0392b"};return n===t?(o.fillColor="#2c3e50",o.strokeColor="grey"):n===e?(o.fillColor="#f1c40f",o.strokeColor="#f39c12"):n===i&&(o.fillColor="white",o.strokeColor="black"),o},M=function(e){var t=e.outerCircle,i=.2*b;t.opacity=1;var n={strokeColor:"blue",strokeWidth:0,dashArray:[1,2],fillColor:null};e.isInteracting&&(e.mayInfectImminently?(t.opacity=.5,n={strokeColor:"#c0392b",strokeWidth:2*i,dashArray:[5*i,5*i],fillColor:"lightgray"}):n={strokeColor:"#2980b9",strokeWidth:i,dashArray:[1,5],fillColor:null}),e.outerCircle.style=n},T=function(e){var t=n["average_speed"].value,i=n["speed_range"].value;if(y>1){var r=t*(1-i),o=2*i*t/(y-1);t=r+e*o}return t},j=function(){k=s(),C.forEach((function(e){var t=0,i=0;if(e.innerCircle)t=e.innerCircle.position.x,i=e.innerCircle.position.y,e.outerCircle.remove();else{t=c+Math.random()*d,i=p+Math.random()*h;var n=new Path.Circle(t,i,b);a.addChild(n),e.innerCircle=n,e.innerCircle.style=I(e.timeToRecovery),e.direction=360*Math.random()}var r=new Path.Circle(t,i,k);a.addChild(r),r.insertAbove(o),e.outerCircle=r}))},E=function(){for(var e=0;e<y;e++){var t={index:e,speed:T(e),isInteracting:!1,timeToRecovery:e<w?m:i,mayInfectImminently:!1};C.push(t)}j()},W=function(){C.forEach((function(e){e.innerCircle.remove(),e.outerCircle.remove()})),C=[]};E();var $=this,A=0,N=0;view.onFrame=function(e){if(P=e.time,$.resetRequired&&(W(),E(),$.resetRequired=!1,N++,A=P),C.length===y){var i=0;v=l(),C.forEach((function(e,n){e.speed=T(n),k=s(),_!=k&&(j(),_=k);var r=e.timeToRecovery;r>=0&&(Math.random()<g?(e.timeToRecovery=t,e.innerCircle.insertAbove(o),Object.assign(I(e.timeToRecovery),e.innerCircle.style)):e.timeToRecovery--);e.isInteracting=!1,e.mayInfectImminently=!1;for(var a=0;a<n;a++){var l=e,d=C[a],h=R(l.innerCircle.position,d.innerCircle.position,k);S(l,d,h)}if(e.timeToRecovery===m)i++;else if(e.timeToRecovery!==t){var v=P-x,y=new Point(0,1*v*e.speed*100);y.angle=e.direction;var w=e.innerCircle.position,b=w.x+y.x,M=w.y+y.y;b<c?(b=c+(c-b),y.x=-y.x):b>u&&(b=u-(b-u),y.x=-y.x),M<p?(M=p+(p-M),y.y=-y.y):M>f&&(M=f-(M-f),y.y=-y.y),e.direction=y.angle+20*(.5-Math.random()),e.innerCircle.position=[b,M],e.outerCircle.position=[b,M]}})),O.$emit("redrawn",{resetCount:N,t:P-A,x:i}),x=P}},view.draw()}},c=l,u=i("2877"),d=Object(u["a"])(c,a,s,!1,null,null,null),p=d.exports,f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:e.properties.id,staticClass:"s-holder"},[i("canvas",{attrs:{id:e.properties.id,"data-paper-hidpi":"off"}})])},h=[],v={props:["properties","parameters"],mounted:function(){var e=this.parameters,t=(this.$refs.sh,document.getElementById(this.properties.id));console.log(this.properties),t.width=this.$refs[this.properties.id].offsetWidth,t.height=this.$refs[this.properties.id].offsetHeight,paper.setup(t);var i=this.properties.weights,n=t.height/(i.paddingTop+i.paddingBottom+i.paddingMiddle+i.titleFontSize+i.slotWidth),r=n*i.paddingTop,o=(i.paddingBottom,n*i.titleFontSize),a=n*i.paddingMiddle,s=n*i.slotWidth,l=r+o,c=l+a,u=0*s,d=new PointText(new Point(u,l));d.justification="left",d.fillColor="black",d.fontFamily="Open Sans",d.fontSize=o;var p=function(t){d.content=e.title+": "+Math.round(100*e.value)/100};p();var f=c+s/2,h=s/2,v=t.width-s/2,m="black",g=new Path.Line(new Point(h,f),new Point(v,f));g.style={strokeColor:m,strokeWidth:s,strokeCap:"round"},g.style.strokeColor=m,g.style.strokeWidth=s;var y=h,w=v,C=(w-y)/(e.max-e.min),b=function(t){var i=(e.max-e.min)*(t-y)/(w-y);return i},k=function(t){var i=y+C*(t-e.min);return i},_=1.25*s,P=_/10,x="white",R="black",S=k(e.value),I=new Path.Circle(S,f,_);I.style={strokeColor:R,strokeWidth:P,fillColor:x};var M=null;I.onMouseDown=function(e){M=e.point.x},I.onMouseDrag=function(t){var i=t.point.x,n=I.position.x+i-M;I.position.x=n<y?y:n>w?w:n,M=i,e.value=b(I.position.x),p()}}},m=v,g=(i("f38e"),Object(u["a"])(m,f,h,!1,null,"3f6f354f",null)),y=g.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"gh",staticClass:"graph-holder"},[i("canvas",{attrs:{id:"graph-canvas","data-paper-hidpi":"off"}})])},C=[],b={props:[],methods:{},mounted:function(){var e=document.getElementById("graph-canvas"),t=this.$refs.gh,i=t.offsetWidth,n=t.offsetHeight;e.width=i,e.height=n,paper.setup(e);var r=paper.project.activeLayer,o=paper.project;console.log("initial: "+r._id);var a=.05,s={n:0,e:i*a,s:n*a,w:i*a},l=[],c=4,u=2,d=0,p=45,f=s.w,h=i-s.e,v=(h-f)/(p-d),m=0,g=12,y=n-s.s,w=s.n,C=(w-y)/(g-m),b=function(e,t){return{t:f+v*(e-d),x:y+C*(t-m)}},k=function(e){var t=new Path;t.strokeColor="red",t.strokeWidth=3;var i=_(b(0,0));t.add(i);var n=_(b(0,e));return t.add(n),t},_=function(e){return new Point(e.t,e.x)},P=function(e){return{resetCount:e,xCumulative:1,bucketStart:0,bucketEnd:u,curve:k()}},x=1,R=0;while(R<=g){var S=new Path;S.strokeColor="lightblue",S.strokeWidth=1,S.add(_(b(d,R))),S.add(_(b(p,R))),R+=x}x=1;var I=0;while(I<=p){var M=new Path;M.strokeColor="lightblue",M.strokeWidth=1,M.add(_(b(I,m))),M.add(_(b(I,g))),I+=x}P(0);var T=0,j=T+u,E=0,W=1,$=k(W);O.$on("redrawn",(function(e){if(paper.project.activeLayer._id!==r._id&&(console.log("setup"),o.activate(),r.activate()),e.resetCount!==E&&($.strokeColor="black",l.push($),l>c&&curves.pop(),l.forEach((function(e){e.opacity=.5*e.opacity})),E=e.resetCount,T=0,j=T+u,W=1,$=k(W)),e.t<p)if(e.t<j){W+=e.x,$.removeSegment($.segments.length-1);var t=_(b(e.t,W));$.add(t)}else{var i=_(b(e.t,0));$.add(i),W=0,T=j,j+=u}}))}},k=b,_=(i("8e60"),Object(u["a"])(k,w,C,!1,null,null,null)),P=_.exports,x=i("2222"),R=i.n(x),S={name:"App",components:{Particles:p,Slider:y,Graph:P},data:function(){return{isReady:!1,params:this.initializeParams(),resetTrigger:!1,menuIsShowing:!1,menuItemNo:2,menuItems:[{iconName:"settings",title:"Controls"},{iconName:"info",title:"About"},{iconName:"timeline",title:'"The Curve"'}],selectedClass:"selected",notSelectedClass:"not-selected"}},methods:{initializeParams:function(){var e=[{key:"average_speed",title:"Average Speed",value:.5,min:0,max:2},{key:"speed_range",title:"Speed Range",value:.5,min:0,max:1},{key:"transmission_distance",title:"Transmission Distance",value:5,min:0,max:20},{key:"transmission_probability",title:"Transmission Probability",value:.1,min:0,max:1}];return e.forEach((function(e){e.resetValue=e.value})),e},getParticlesProps:function(){return{id:"particles",width:.99*window.innerWidth,height:.99*window.innerHeight,isReady:this.isReady}},getSliderProps:function(e){var t=Object.assign(e,{id:e.key+"-slider",weights:{paddingTop:2,paddingBottom:4,titleFontSize:5,paddingMiddle:3,slotWidth:4}});return t},getSliderParams:function(){return this.params},getParticlesParams:function(){var e={};return this.params.forEach((function(t){e[t.key]=t})),e},clickReset:function(){this.$refs.particles.triggerReset()},clickShowMenu:function(e){this.menuIsShowing=!0,this.menuItemNo=e},clickHideMenu:function(){this.menuIsShowing=!1}},mounted:function(){R.a.install(window),window.onorientationchange=function(){console.log("Orientation change."),window.location.reload()},window.onresize=function(){console.log("Resize."),setTimeout((function(){window.location.reload()}),200)},this.isReady=!0,console.log(this.$refs.sh.offsetWidth)}},I=S,M=(i("034f"),Object(u["a"])(I,r,o,!1,null,null,null)),T=M.exports,j=i("9483");Object(j["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["a"].config.productionTip=!1;var O=new n["a"];new n["a"]({render:function(e){return e(T)}}).$mount("#app")},"85ec":function(e,t,i){},"8e60":function(e,t,i){"use strict";var n=i("2811"),r=i.n(n);r.a},a1b5:function(e,t,i){},f38e:function(e,t,i){"use strict";var n=i("a1b5"),r=i.n(n);r.a}});
//# sourceMappingURL=app.ba911aba.js.map