(function(e){function t(t){for(var i,a,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],i=!0,s=1;s<r.length;s++){var l=r[s];0!==n[l]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var i={},n={app:0},o=[];function a(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=i,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var i=r("85ec"),n=r.n(i);n.a},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",[e.isReady?r("Particles",{attrs:{properties:e.getParticlesProps(),parameters:e.getParticlesParams()}}):e._e()],1),r("div",{ref:"pholder",staticClass:"popup-holder"},[e.isReady?r("div",e._l(e.getSliderParams(),(function(t){return r("Slider",{key:t.key,attrs:{parameters:t,properties:e.getSliderProps(t)}})})),1):e._e()])])},o=[],a=(r("4160"),r("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("canvas",{attrs:{id:e.properties.id,"data-paper-hidpi":"off"}})}),s=[],l={props:["properties","parameters"],mounted:function(){var e=-1,t=-2,r=-3,i=this.parameters,n=document.getElementById(this.properties.id);n.width=this.properties.width,n.height=this.properties.height,paper.setup(n);var o=new Path.Rectangle({point:[0,0],size:[n.width,n.height]});o.fillColor="#ddeeff";for(var a=project.activeLayer,s=function(){return i["transmission_distance"].value*n.width/100},l=function(){return i["transmission_probability"].value},c=0,d=n.width,u=d-c,p=0,h=n.height,f=h-p,v=l(),m=200,y=.1/m,g=100,w=[],C=function(e,t,r){var i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return!(i>r||n>r)&&(2^i)+(2^n)<(2^r)},b=function(e,t,i){var n=[e,t],o=[],a=[];i&&(n.forEach((function(e){e.isInteracting=!0,e.timeToRecovery>=0?o.push(e):e.timeToRecovery===r&&a.push(e)})),1===o.length&&1===a.length&&(a[0].timeToRecovery=Math.random()<v?m:a[0].timeToRecovery,o[0].mayInfectImminently=!0)),n.forEach((function(e){k(e),e.innerCircle.style=Object.assign(P(e.timeToRecovery),e.innerCircle.style)}))},P=function(i){var n=.1*T,o={fillColor:"#e74c3c",strokeWidth:2*n,strokeColor:"#c0392b"};return i===t?(o.fillColor="#2c3e50",o.strokeColor="grey"):i===e?(o.fillColor="#f1c40f",o.strokeColor="#f39c12"):i===r&&(o.fillColor="white",o.strokeColor="black"),o},k=function(e){var t=e.outerCircle,r=.1*T;t.opacity=1;var i={strokeColor:"blue",strokeWidth:0,dashArray:[1,2],fillColor:null};e.isInteracting&&(e.mayInfectImminently?(t.opacity=.5,i={strokeColor:"#c0392b",strokeWidth:2*r,dashArray:[5*r,5*r],fillColor:"lightgray"}):i={strokeColor:"#2980b9",strokeWidth:r,dashArray:[1,5],fillColor:null}),e.outerCircle.style=i},x=1,_=function(e){var t=i["average_speed"].value,r=i["speed_range"].value;if(g>1){var n=t*(1-r),o=2*r*t/(g-1);t=n+e*o}return t},T=Math.min(n.height,n.width)/100,R=s(),S=R,M=0;M<g;M++){var O={index:M,speed:_(M),isInteracting:!1,timeToRecovery:M<x?m:r,mayInfectImminently:!1};w.push(O)}var j=function(){R=s(),w.forEach((function(e){var t=0,r=0;if(e.innerCircle)t=e.innerCircle.position.x,r=e.innerCircle.position.y,e.outerCircle.remove();else{t=c+Math.random()*u,r=p+Math.random()*f;var i=new Path.Circle(t,r,T);a.addChild(i),e.innerCircle=i,e.innerCircle.style=P(e.timeToRecovery)}var n=new Path.Circle(t,r,R);a.addChild(n),n.insertAbove(o),e.outerCircle=n}))};j(),view.onFrame=function(e){v=l(),w.forEach((function(r,i){r.speed=_(i),R=s(),S!=R&&(j(),S=R);var n=r.timeToRecovery;n>=0&&(Math.random()<y?(r.timeToRecovery=t,r.innerCircle.insertAbove(o),Object.assign(P(r.timeToRecovery),r.innerCircle.style)):r.timeToRecovery--);r.isInteracting=!1,r.mayInfectImminently=!1;for(var a=0;a<i;a++){var l=r,u=w[a],f=C(l.innerCircle.position,u.innerCircle.position,R);b(l,u,f)}if(r.timeToRecovery!==t){var v=e.delta,m=new Point(0,1*v*r.speed*100);m.angle=360*Math.random();var g=r.innerCircle.position,k=g.x+m.x;k=k<c?c+(c-k):k>d?d-(k-d):k;var x=g.y+m.y;x=x<p?p+(p-x):x>h?h-(x-h):x,r.innerCircle.position=[k,x],r.outerCircle.position=[k,x]}}))},view.draw()}},c=l,d=r("2877"),u=Object(d["a"])(c,a,s,!1,null,null,null),p=u.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("canvas",{attrs:{id:e.properties.id,"data-paper-hidpi":"off"}})},f=[],v={props:["properties","parameters"],mounted:function(){console.log(JSON.stringify(this.parameters));var e=this.parameters,t=document.getElementById(this.properties.id);t.width=this.properties.width,t.height=this.properties.height,paper.setup(t);var r=this.properties.weights,i=t.height/(r.paddingTop+r.paddingBottom+r.paddingMiddle+r.titleFontSize+r.slotWidth),n=i*r.paddingTop,o=(r.paddingBottom,i*r.titleFontSize),a=i*r.paddingMiddle,s=i*r.slotWidth,l=n+o,c=l+a,d=0*s,u=new PointText(new Point(d,l));u.justification="left",u.fillColor="grey",u.fontSize=o,u.fontWeight="bold";var p=function(t){u.content=e.title+": "+Math.round(100*e.value)/100};p();var h=c+s/2,f=s/2,v=t.width-s/2,m="lightgray",y=new Path.Line(new Point(f,h),new Point(v,h));y.style={strokeColor:m,strokeWidth:s,strokeCap:"round"},y.style.strokeColor=m,y.style.strokeWidth=s;var g=f,w=v,C=(w-g)/(e.max-e.min),b=function(t){var r=(e.max-e.min)*(t-g)/(w-g);return r},P=function(t){var r=g+C*(t-e.min);return r},k=.45*s,x=k/10,_="white",T="grey",R=P(e.value),S=new Path.Circle(R,h,k);S.style={strokeColor:T,strokeWidth:x,fillColor:_};var M=null;S.onMouseDown=function(e){M=e.point.x},S.onMouseDrag=function(t){var r=t.point.x,i=S.position.x+r-M;S.position.x=i<g?g:i>w?w:i,M=r,e.value=b(S.position.x),p()}}},m=v,y=Object(d["a"])(m,h,f,!1,null,null,null),g=y.exports,w=r("2222"),C=r.n(w),b={name:"App",components:{Particles:p,Slider:g},data:function(){return{isReady:!1,params:this.initializeParams()}},methods:{initializeParams:function(){var e=[{key:"average_speed",title:"Average Speed",value:2,min:0,max:10},{key:"speed_range",title:"Speed Range",value:.5,min:0,max:1},{key:"transmission_distance",title:"Transmission Distance",value:10,min:0,max:20},{key:"transmission_probability",title:"Transmission Probability",value:.1,min:0,max:1}];return e.forEach((function(e){e.resetValue=e.value})),e},getParticlesProps:function(){return{id:"particles",width:.95*window.innerWidth,height:.95*window.innerHeight,isReady:this.isReady}},getSliderProps:function(e){var t=Object.assign(e,{id:e.key+"-slider",width:.8*this.sliderWidth,height:.8*this.sliderHeight/this.getSliderParams().length,weights:{paddingTop:2,paddingBottom:0,titleFontSize:6,paddingMiddle:2,slotWidth:8}});return t},getSliderParams:function(){return this.params},getParticlesParams:function(){var e={};return this.params.forEach((function(t){e[t.key]=t})),e}},mounted:function(){C.a.install(window),this.isReady=!0,this.sliderWidth=this.$refs.pholder.offsetWidth,this.sliderHeight=this.$refs.pholder.offsetHeight}},P=b,k=(r("034f"),Object(d["a"])(P,n,o,!1,null,null,null)),x=k.exports,_=r("2f62");i["a"].use(_["a"]);var T=new _["a"].Store({state:{},mutations:{},actions:{},modules:{}});i["a"].config.productionTip=!1,new i["a"]({store:T,render:function(e){return e(x)}}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.65b3dfd1.js.map