(function(e){function t(t){for(var r,a,s=t[0],l=t[1],c=t[2],u=0,h=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&h.push(n[a][0]),n[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(h.length)h.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],r=!0,s=1;s<i.length;s++){var l=i[s];0!==n[l]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=i[0]))}return e}var r={},n={app:0},o=[];function a(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=r,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(i,r,function(t){return e[t]}.bind(null,r));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var r=i("85ec"),n=i.n(r);n.a},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",[e.isReady?i("Particles",{ref:"particles",attrs:{properties:e.getParticlesProps(),parameters:e.getParticlesParams()}}):e._e()],1),i("div",{ref:"pholder",staticClass:"popup-holder",class:{hidden:!e.menuIsShowing}},[i("div",{staticClass:"hide-menu-button",on:{click:function(t){return e.clickHideMenu()}}},[i("i",{staticClass:"material-icons standard-padding"},[e._v("close")])]),i("div",{staticClass:"mini-heading"},[e._v("EPIDEMIC SIMULATOR")]),0===e.menuItem?i("div",[i("h2",[e._v("Controls")]),e.isReady?i("div",e._l(e.getSliderParams(),(function(t){return i("Slider",{key:t.key,attrs:{parameters:t,properties:e.getSliderProps(t)}})})),1):e._e()]):e._e(),1===e.menuItem?i("div",[i("h2",[e._v("About")]),i("p",[e._v("Blahblahblah.")])]):e._e(),2===e.menuItem?i("div",[i("h2",[e._v('"The Curve"')]),i("p",[e._v("Blahblahblah.")]),i("p",[e._v("Blahblahblah.")])]):e._e()]),i("div"),i("div",{staticClass:"reset-button"},[i("div",{on:{click:function(t){return e.clickReset()}}},[i("i",{staticClass:"material-icons standard-padding"},[e._v("refresh")])])]),e.menuIsShowing?e._e():i("div",{staticClass:"show-menu-button"},[i("div",{on:{click:function(t){return e.clickShowMenu(0)}}},[i("i",{staticClass:"material-icons standard-padding"},[e._v("settings")])]),i("div",{on:{click:function(t){return e.clickShowMenu(1)}}},[i("i",{staticClass:"material-icons standard-padding"},[e._v("info")])]),i("div",{on:{click:function(t){return e.clickShowMenu(2)}}},[i("i",{staticClass:"material-icons standard-padding"},[e._v("timeline")])])])])},o=[],a=(i("4160"),i("159b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("canvas",{attrs:{id:e.properties.id,"data-paper-hidpi":"off"}})}),s=[],l={props:["properties","parameters"],methods:{triggerReset:function(){this.resetRequired=!0}},mounted:function(){this.resetRequired=!1;var e=-1,t=-2,i=-3,r=this.parameters,n=document.getElementById(this.properties.id);n.width=this.properties.width,n.height=this.properties.height,paper.setup(n);var o=new Path.Rectangle({point:[0,0],size:[n.width,n.height]});o.fillColor="#ddeeff";var a=project.activeLayer,s=function(){return r["transmission_distance"].value*n.width/100},l=function(){return r["transmission_probability"].value},c=0,d=n.width,u=d-c,h=0,p=n.height,f=p-h,v=l(),m=200,g=.1/m,y=100,C=1,w=[],b=Math.min(n.height,n.width)/100,k=s(),_=k,P=0,x=0,S=function(e,t,i){var r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return!(r>i||n>i)&&(2^r)+(2^n)<(2^i)},R=function(e,t,r){var n=[e,t],o=[],a=[];r&&(n.forEach((function(e){e.isInteracting=!0,e.timeToRecovery>=0?o.push(e):e.timeToRecovery===i&&a.push(e)})),1===o.length&&1===a.length&&(a[0].timeToRecovery=Math.random()<v?m:a[0].timeToRecovery,o[0].mayInfectImminently=!0)),n.forEach((function(e){I(e),e.innerCircle.style=Object.assign(M(e.timeToRecovery),e.innerCircle.style)}))},M=function(r){var n=.1*b,o={fillColor:"#e74c3c",strokeWidth:2*n,strokeColor:"#c0392b"};return r===t?(o.fillColor="#2c3e50",o.strokeColor="grey"):r===e?(o.fillColor="#f1c40f",o.strokeColor="#f39c12"):r===i&&(o.fillColor="white",o.strokeColor="black"),o},I=function(e){var t=e.outerCircle,i=.2*b;t.opacity=1;var r={strokeColor:"blue",strokeWidth:0,dashArray:[1,2],fillColor:null};e.isInteracting&&(e.mayInfectImminently?(t.opacity=.5,r={strokeColor:"#c0392b",strokeWidth:2*i,dashArray:[5*i,5*i],fillColor:"lightgray"}):r={strokeColor:"#2980b9",strokeWidth:i,dashArray:[1,5],fillColor:null}),e.outerCircle.style=r},T=function(e){var t=r["average_speed"].value,i=r["speed_range"].value;if(y>1){var n=t*(1-i),o=2*i*t/(y-1);t=n+e*o}return t},O=function(){k=s(),w.forEach((function(e){var t=0,i=0;if(e.innerCircle)t=e.innerCircle.position.x,i=e.innerCircle.position.y,e.outerCircle.remove();else{t=c+Math.random()*u,i=h+Math.random()*f;var r=new Path.Circle(t,i,b);a.addChild(r),e.innerCircle=r,e.innerCircle.style=M(e.timeToRecovery),e.direction=360*Math.random()}var n=new Path.Circle(t,i,k);a.addChild(n),n.insertAbove(o),e.outerCircle=n}))},j=function(){for(var e=0;e<y;e++){var t={index:e,speed:T(e),isInteracting:!1,timeToRecovery:e<C?m:i,mayInfectImminently:!1};w.push(t)}O()},W=function(){w.forEach((function(e){e.innerCircle.remove(),e.outerCircle.remove()})),w=[]};j();var E=this;view.onFrame=function(e){P=e.time,E.resetRequired&&(W(),j(),E.resetRequired=!1),w.length===y&&(v=l(),w.forEach((function(e,i){e.speed=T(i),k=s(),_!=k&&(O(),_=k);var r=e.timeToRecovery;r>=0&&(Math.random()<g?(e.timeToRecovery=t,e.innerCircle.insertAbove(o),Object.assign(M(e.timeToRecovery),e.innerCircle.style)):e.timeToRecovery--);e.isInteracting=!1,e.mayInfectImminently=!1;for(var n=0;n<i;n++){var a=e,l=w[n],u=S(a.innerCircle.position,l.innerCircle.position,k);R(a,l,u)}if(e.timeToRecovery!==t){var f=P-x,v=new Point(0,1*f*e.speed*100);v.angle=e.direction;var m=e.innerCircle.position,y=m.x+v.x,C=m.y+v.y;y<c?(y=c+(c-y),v.x=-v.x):y>d&&(y=d-(y-d),v.x=-v.x),C<h?(C=h+(h-C),v.y=-v.y):C>p&&(C=p-(C-p),v.y=-v.y),e.direction=v.angle+20*(.5-Math.random()),e.innerCircle.position=[y,C],e.outerCircle.position=[y,C]}})),x=P)},view.draw()}},c=l,d=i("2877"),u=Object(d["a"])(c,a,s,!1,null,null,null),h=u.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("canvas",{attrs:{id:e.properties.id,"data-paper-hidpi":"off"}})},f=[],v={props:["properties","parameters"],mounted:function(){console.log(JSON.stringify(this.parameters));var e=this.parameters,t=document.getElementById(this.properties.id);t.width=this.properties.width,t.height=this.properties.height,paper.setup(t);var i=this.properties.weights,r=t.height/(i.paddingTop+i.paddingBottom+i.paddingMiddle+i.titleFontSize+i.slotWidth),n=r*i.paddingTop,o=(i.paddingBottom,r*i.titleFontSize),a=r*i.paddingMiddle,s=r*i.slotWidth,l=n+o,c=l+a,d=0*s,u=new PointText(new Point(d,l));u.justification="left",u.fillColor="grey",u.fontFamily="Open Sans",u.fontSize=o;var h=function(t){u.content=e.title+": "+Math.round(100*e.value)/100};h();var p=c+s/2,f=s/2,v=t.width-s/2,m="lightgray",g=new Path.Line(new Point(f,p),new Point(v,p));g.style={strokeColor:m,strokeWidth:s,strokeCap:"round"},g.style.strokeColor=m,g.style.strokeWidth=s;var y=f,C=v,w=(C-y)/(e.max-e.min),b=function(t){var i=(e.max-e.min)*(t-y)/(C-y);return i},k=function(t){var i=y+w*(t-e.min);return i},_=.45*s,P=_/10,x="white",S="grey",R=k(e.value),M=new Path.Circle(R,p,_);M.style={strokeColor:S,strokeWidth:P,fillColor:x};var I=null;M.onMouseDown=function(e){I=e.point.x},M.onMouseDrag=function(t){var i=t.point.x,r=M.position.x+i-I;M.position.x=r<y?y:r>C?C:r,I=i,e.value=b(M.position.x),h()}}},m=v,g=Object(d["a"])(m,p,f,!1,null,null,null),y=g.exports,C=i("2222"),w=i.n(C),b={name:"App",components:{Particles:h,Slider:y},data:function(){return{isReady:!1,params:this.initializeParams(),resetTrigger:!1,menuIsShowing:!1}},methods:{initializeParams:function(){var e=[{key:"average_speed",title:"Average Speed",value:.5,min:0,max:2},{key:"speed_range",title:"Speed Range",value:.5,min:0,max:1},{key:"transmission_distance",title:"Transmission Distance",value:5,min:0,max:20},{key:"transmission_probability",title:"Transmission Probability",value:.1,min:0,max:1}];return e.forEach((function(e){e.resetValue=e.value})),e},getParticlesProps:function(){return{id:"particles",width:.99*window.innerWidth,height:.99*window.innerHeight,isReady:this.isReady}},getSliderProps:function(e){var t=Object.assign(e,{id:e.key+"-slider",width:.75*this.sliderWidth,height:.15*this.sliderWidth,weights:{paddingTop:2,paddingBottom:0,titleFontSize:5,paddingMiddle:2,slotWidth:6}});return t},getSliderParams:function(){return this.params},getParticlesParams:function(){var e={};return this.params.forEach((function(t){e[t.key]=t})),e},clickReset:function(){this.$refs.particles.triggerReset()},clickShowMenu:function(e){this.menuIsShowing=!0,this.menuItem=e},clickHideMenu:function(){this.menuIsShowing=!1}},mounted:function(){w.a.install(window),this.isReady=!0,this.sliderWidth=this.$refs.pholder.offsetWidth,this.sliderHeight=this.$refs.pholder.offsetHeight}},k=b,_=(i("034f"),Object(d["a"])(k,n,o,!1,null,null,null)),P=_.exports,x=i("2f62");r["a"].use(x["a"]);var S=new x["a"].Store({state:{},mutations:{},actions:{},modules:{}});r["a"].config.productionTip=!1,new r["a"]({store:S,render:function(e){return e(P)}}).$mount("#app")},"85ec":function(e,t,i){}});
//# sourceMappingURL=app.6bbe1401.js.map